{% extends 'user_dashboard/starter.html' %}
{% load static %}

{% block title %}Service List{% endblock title %}

{% block content %}


<h2>Service Details - {{ service.service_type }}</h2>
<div class="row d-flex justify-content-center mt-4">
    <div class="col-lg-8 details_div px-5 py-4">
        <p><strong>Provider:</strong> {{ service.provider.full_name }}</p>
        <p><strong>Description:</strong> {{ service.description }}</p>
        <p><strong>Price:</strong> <span id="price-display">Rs. {{ service.price_per_hour }}</span></p>
        
        {% comment %} <label class="form-check-label">
            <input class="form-check-input offer-discount-checkbox" type="checkbox" name="offer_discount" value="1">
            <small class="green_text">
                Exchange {{ service.green_coins_required }} green coins for a discount of {{ service.discount_percentage_for_greencoins }}%.
            </small>    
        </label> {% endcomment %}

        {% if service_booked_obj %}
            <a href="" class="btn btn-primary disabled">Already Booked</a>
        {% else %}
            <form method="post" class="form-horizontal">
                {% csrf_token %}
                <div class="form-group">
                    <label for="booking_date" class="control-label">Booking Date</label>
                    <div class="">
                        {{ form.booking_date }}
                    </div>
                </div>
                <div class="form-group">
                    <div class="d-flex justify-content-center">
                        <button type="submit" class="details_btn">Book Service</button>
                    </div>
                </div>
            </form>
        {% endif %}
    </div>
</div>
{% comment %} <head>
    <link rel="stylesheet" href="{% static '/user_dashboard/css/services.css '%}">
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const checkbox = document.querySelector(".offer-discount-checkbox");
            const priceDisplay = document.getElementById("price-display");
            const originalPrice = parseFloat({{ service.price_per_hour }});
            const discountPercentage = parseFloat({{ service.discount_percentage_for_greencoins }});
            
            // Calculate discounted price
            const discountedPrice = originalPrice - (originalPrice * (discountPercentage / 100));
            
            // Update price display when checkbox is toggled
            checkbox.addEventListener("change", function() {
                if (checkbox.checked) {
                    priceDisplay.textContent = `Rs. ${discountedPrice.toFixed(2)}`;
                } else {
                    priceDisplay.textContent = `Rs. ${originalPrice.toFixed(2)}`;
                }
            });
        });
    </script>
</head> {% endcomment %}
{% endblock content %}
