{% extends 'user_dashboard/starter.html' %}
{% load static %}

{% block title %}Servicedflg h toie List{% endblock title %}

{% block content %}
<h2>Service Details - {{ service.service_type }}</h2>
<div class="row d-flex justify-content-center mt-4">
    <div class="col-lg-8 details_div px-5 py-4">
        <p><strong>Provider:</strong> {{ service.provider.full_name }}</p>
        <p><strong>Description:</strong> {{ service.description }}</p>
        <p><strong>Price:</strong> <span id="price-display">Rs. {{ service.price_per_hour }}</span></p>
        
        {% if service_booked_obj %}
            <a href="" class="btn btn-primary disabled">Already Booked</a>
        {% else %}
            <form method="post" class="form-horizontal">
                {% csrf_token %}
                <div class="form-group">
                    <label for="booking_date" class="control-label">Booking Date</label>
                    <div class="">
                        {{ form.booking_date }}
                    </div>
                </div>
                <div class="form-group">
                    <div class="d-flex justify-content-center">
                        <button type="submit" class="details_btn">Book Service</button>
                    </div>
                </div>
            </form>
        {% endif %}
    </div>
</div>

<script>
// Check if a discounted price is present in the URL and update the displayed price if it is
document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const discountedPrice = urlParams.get('discounted_price');
    
    if (discountedPrice) {
        document.getElementById('price-display').textContent = `Rs. ${discountedPrice}`;
    }
});
</script>

{% endblock content %}
