{% extends 'vendor_dashboard/base.html' %}
{% load static %}

{% block main_content %}
<style>
  .form-group{
    width: 100%;
  }
.sell_wrapper form .form-control {
  border: none;
  border-bottom: 2px solid #ccc;
  border-radius: 7px;
  padding: 10px;
  margin-bottom: 20px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: border-color 0.3s, box-shadow 0.3s;
}
.sell_wrapper form .form-control:focus {
  border-bottom-color: #37af2c;
  outline: none;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}
label
{
    margin-bottom: 10px;    
}
</style>
<nav class="p-4 bg-light" style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
    <ol class="breadcrumb m-0">
      <li class="breadcrumb-item"><a href="{% url 'vendor_dashboard:vendor_dashboard' %}">Home</a></li>
      <li class="breadcrumb-item active" aria-current="page">Add Product</li>
    </ol>
  </nav>
  <h3 class="text-center m-4">Add Product</h3>
<div>
    <div class="row d-flex align-items-center justify-content-center mx-lg-0 mx-1">
        <div class="col-lg-8 sell_wrapper">
            <form method="post" action="" class="p-lg-4 px-1 py-4 update-form" enctype="multipart/form-data">
                {% include 'app_common/snippets/alert.html' %}
                {% csrf_token %}

                <div class="form-group">
                    {{ form.name.label_tag }}
                    {{ form.name }}
                </div>
                <div class="form-group">
                    {{ form.description.label_tag }}
                    {{ form.description }}
                </div>
                <div class="form-group">
                    {{ form.discount_price.label_tag }}
                    {{ form.discount_price }}
                </div>
                <div class="form-group">
                    {{ form.max_price.label_tag }}
                    {{ form.max_price }}
                </div>
                <div class="form-group">
                    {{ form.image.label_tag }}
                    {{ form.image }}
                </div>
                <div class="form-group">
                    {{ form.stock.label_tag }}
                    {{ form.stock }}
                </div>
                <div class="form-group">
                    {{ form.category.label_tag }}
                    {{ form.category }}
                </div>
                <div id="custom-category-container" class="form-group" style="display: none;">
                    {{ form.custom_category.label_tag }}
                    {{ form.custom_category }}
                </div>
                <div class="form-group">
                    {{ form.discount_percentage.label_tag }}
                    {{ form.discount_percentage }}
                </div>
                <div class="form-group">
                    {{ form.gst_rate.label_tag }}
                    {{ form.gst_rate }}
                </div>
                <button type="submit" class=" mt-2 py-2 w-100" id="table_BTN">
                    Sell Now
                </button>
            </form>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const categorySelect = document.getElementById('category-select');
    const customCategoryContainer = document.getElementById('custom-category-container');
    const customCategoryInput = document.getElementById('custom-category-input');

    function toggleCustomCategory() {
        if (categorySelect.value === 'other') {
            customCategoryContainer.style.display = 'block';
            customCategoryInput.style.display = "block";
        } else {
            customCategoryContainer.style.display = 'none';
        }
    }

    // Initial setup to handle the current state
    toggleCustomCategory();

    // Listen for changes to update visibility
    categorySelect.addEventListener('change', toggleCustomCategory);
});
</script>
{% endblock main_content %}
